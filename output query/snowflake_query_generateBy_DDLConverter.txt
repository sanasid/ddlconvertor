ALTER TABLE JOB_HISTORY ADD CONSTRAINT EMP_MANAGER_FK FOREIGN KEY ( MANAGER_ID ) REFERENCES JOB_HISTORY ( EMPLOYEE_ID ) NOT DEFERRABLE;
ALTER TABLE DEPARTMENTS ADD CONSTRAINT COUNTR_REG_FK FOREIGN KEY ( REGION_ID ) REFERENCES REGIONS ( REGION_ID ) NOT DEFERRABLE;
ALTER TABLE COUNTRIES ADD CONSTRAINT DEPT_MGR_FK FOREIGN KEY ( MANAGER_ID ) REFERENCES EMPLOYEES ( EMPLOYEE_ID ) NOT DEFERRABLE;
ALTER TABLE JOBS ADD CONSTRAINT JOB_ID_PK PRIMARY KEY ( JOB_ID );
ALTER TABLE REGIONS ADD CONSTRAINT JHIST_JOB_FK FOREIGN KEY ( JOB_ID ) REFERENCES JOBS ( JOB_ID ) NOT DEFERRABLE;
ALTER TABLE LOCATIONS ADD CONSTRAINT LOC_C_ID_FK FOREIGN KEY ( COUNTRY_ID ) REFERENCES COUNTRIES ( COUNTRY_ID ) NOT DEFERRABLE;
ALTER TABLE EMPLOYEES ADD CONSTRAINT REG_ID_PK PRIMARY KEY ( REGION_ID );
CREATE DATABASE DEV;
CREATE OR REPLACE VIEW EMP_DETAILS_VIEW AS SELECT e.employee_id, e.job_id, e.manager_id, e.department_id, d.location_id, l.country_id, e.first_name, e.last_name, e.salary, e.commission_pct, d.department_name, j.job_title, l.city, l.state_province, c.country_name, r.region_nameFROM employees e, departments d, jobs j, locations l, countries c, regions rWHERE e.department_id = d.department_id AND d.location_id = l.location_id AND l.country_id = c.country_id AND c.region_id = r.region_id AND j.job_id = e.job_idWITH READ ONLY;
CREATE SCHEMA HR;

